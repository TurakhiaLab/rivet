
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="images/rivet-icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>RIVET Wiki</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#welcome-to-the-rivet-wiki" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="RIVET Wiki" class="md-header__button md-logo" aria-label="RIVET Wiki" data-md-component="logo">
      
  <img src="images/rivet-icon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RIVET Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/TurakhiaLab/rivet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TurakhiaLab/rivet
  </div>
</a>
      </div>
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="RIVET Wiki" class="md-nav__button md-logo" aria-label="RIVET Wiki" data-md-component="logo">
      
  <img src="images/rivet-icon.png" alt="logo">

    </a>
    RIVET Wiki
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/TurakhiaLab/rivet" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    TurakhiaLab/rivet
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rivet-video-tutorial" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Video Tutorial
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rivet-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#web-interface-walkthrough" class="md-nav__link">
    <span class="md-ellipsis">
      Web Interface Walkthrough
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Web Interface Walkthrough">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selecting-recombinant-of-interest" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting Recombinant of Interest
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-table-next-and-previous-buttons" class="md-nav__link">
    <span class="md-ellipsis">
      Results Table Next and Previous Buttons
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-by-column" class="md-nav__link">
    <span class="md-ellipsis">
      Sort by Column
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-table" class="md-nav__link">
    <span class="md-ellipsis">
      Search Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-by-sample-id" class="md-nav__link">
    <span class="md-ellipsis">
      Search by Sample ID
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snv-plot" class="md-nav__link">
    <span class="md-ellipsis">
      SNV plot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-descendants" class="md-nav__link">
    <span class="md-ellipsis">
      Query Descendants
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#taxonium-view" class="md-nav__link">
    <span class="md-ellipsis">
      Taxonium View
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#view-usher-subtree" class="md-nav__link">
    <span class="md-ellipsis">
      View UShER Subtree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recombinant-detailed-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Recombinant Detailed Overview
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#view-amino-acid-sites" class="md-nav__link">
    <span class="md-ellipsis">
      View Amino Acid Sites
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rivet-results-table" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Results Table
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quality-control-and-filtration-checks" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Control and Filtration Checks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-rivet-for-other-pathogens" class="md-nav__link">
    <span class="md-ellipsis">
      Using RIVET for Other Pathogens
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using RIVET for Other Pathogens">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#human-respiratory-syncytial-virus-hrsv-subgroup-a" class="md-nav__link">
    <span class="md-ellipsis">
      Human Respiratory Syncytial Virus (HRSV) Subgroup A
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monkeypox-virus" class="md-nav__link">
    <span class="md-ellipsis">
      Monkeypox Virus
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-rivet-locally" class="md-nav__link">
    <span class="md-ellipsis">
      Use RIVET Locally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use RIVET Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-rivet-backend-using-docker-on-linux" class="md-nav__link">
    <span class="md-ellipsis">
      Installing RIVET Backend using Docker on Linux
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-rivet-backend-locally-on-your-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Running RIVET Backend Locally On Your Machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-rivet-backend-on-google-cloud" class="md-nav__link">
    <span class="md-ellipsis">
      Running RIVET Backend On Google Cloud
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-rivet-frontend-locally-on-your-machine" class="md-nav__link">
    <span class="md-ellipsis">
      Install RIVET Frontend Locally On Your Machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clone-rivet-repo-locally" class="md-nav__link">
    <span class="md-ellipsis">
      Clone RIVET Repo Locally
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conda-install" class="md-nav__link">
    <span class="md-ellipsis">
      Conda Install
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inferring-recombinants-using-the-rivet-backend" class="md-nav__link">
    <span class="md-ellipsis">
      Inferring Recombinants Using the RIVET Backend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Inferring Recombinants Using the RIVET Backend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rivet-backend" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Backend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rivet-backend-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Backend Architecture
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rivet-backend-input" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Backend Input
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-rivet-job" class="md-nav__link">
    <span class="md-ellipsis">
      Launch RIVET Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rivet-backend-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      RIVET Backend Outputs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualizing-your-results-using-the-rivet-frontend" class="md-nav__link">
    <span class="md-ellipsis">
      Visualizing Your Results Using the RIVET Frontend
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Visualizing Your Results Using the RIVET Frontend">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#required-inputs" class="md-nav__link">
    <span class="md-ellipsis">
      Required Inputs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/TurakhiaLab/rivet/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/TurakhiaLab/rivet/raw/master/docs/index.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<p><img src="images/rivet-icon.png" width="200" height="200"/></p>
<h1 id="welcome-to-the-rivet-wiki">Welcome to the RIVET Wiki</h1>
<p>RIVET is a software pipeline and visual web platform to perform SARS-CoV-2 recombination inference using RIPPLES and organize the relevant information in order to greatly accelerate the process of identifying and tracking SARS-CoV-2 recombinants.</p>
<p><br></p>
<hr>

<h2 id="rivet-video-tutorial">RIVET Video Tutorial</h2>
<iframe width="1000" height="600"  src="https://youtube.com/embed/XelRL3qJlD0" frameborder="0" allowfullscreen></iframe>

<p><br></p>
<hr>

<h2 id="rivet-architecture">RIVET Architecture</h2>
<p>RIVET is a program designed to aid in SARS-CoV-2 recombination analysis and consists of backend and frontend components:</p>
<p><br>
1. <a href="installation/upload.html">Backend</a>: RIVET's backend pipeline uses <a href="https://www.nature.com/articles/s41586-022-05189-9">RIPPLES</a> for recombination detection in a <a href="https://usher-wiki.readthedocs.io/en/latest/UShER.html">mutation-annotated tree</a> and has a subsequent automated filtration pipeline to flag potential false-positives resulting from bioinformatic, contamination or other sequencing errors.  Next, the recombination results are ranked and additional results/metadata files are generated by the RIVET backend pipeline that can be loaded by the RIVET frontend.</p>
<p><br>
2. <a href="installation/analyze.html">Frontend</a>: The RIVET frontend is an interactive, web-browser interface for online visualization, tracking, and analysis of recombination detection results.
<br></p>
<p><img alt="" src="images/rivet_backend_diagram.jpg" /></p>
<p><br></p>
<hr>

<h2 id="web-interface-walkthrough">Web Interface Walkthrough</h2>
<p><br></p>
<h3 id="selecting-recombinant-of-interest">Selecting Recombinant of Interest</h3>
<p>Each row in the results table represents an inferred recombinant. You can <strong>horizontally scroll</strong> to the right to view more columns in the table, and <strong>click</strong> a row to select the recombinant you are interested in visualizing. </p>
<p><img src="start/images/row-select.png" width="1000" height="500"/></p>
<p>For detailed information on each column of the results table, please see the <a href="start/table.html">RIVET Results Table</a> page.</p>
<h3 id="results-table-next-and-previous-buttons">Results Table Next and Previous Buttons</h3>
<p>Use the <code>next</code> and <code>previous</code> buttons shown below to skip to the next recombinant result (next row) and SNV visualization in the table.</p>
<p><img src="start/images/next-prev-buttons.png" width="1000"/></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also use the arrow keys instead of the <code>next</code> and <code>previous</code> buttons.  Use the right arrow key <img alt="‚ñ∂" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/25b6.svg" title=":arrow_forward:" /> and left arrow key <img alt="‚óÄ" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/25c0.svg" title=":arrow_backward:" /> to skip to <code>next</code> and <code>previous</code> results respectively.</p>
</div>
<h3 id="sort-by-column">Sort by Column</h3>
<p>The results can be sorted by any column, by <strong>clicking on the column title</strong>, shown below:
<img src="start/images/RIVET-table-columns.png" width="1000"/>
<br></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, the results are ranked by the <code>Recombinant Ranking Score</code>.</p>
</div>
<h3 id="search-table">Search Table</h3>
<p>The table can be searched and the results shown will be filtered down based on the given query.  For example, if you want to search for all recombinant results with <code>XBB</code> lineage classification just type <code>XBB</code> into the search bar.</p>
<h3 id="search-by-sample-id">Search by Sample ID</h3>
<p>A user can search for recombinant ancestry in specific samples by using the search by sample identifer feature. Click the toggle button to its active state, and then enter the sample identifier into the search bar.  When the <code>Search by sample</code> toggle is active, normal table search will be disabled and all search queries should be sample identifiers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once you have entered the sample identifier into the search bar, it may take a few seconds for the table results to refresh with the results of your query.</p>
</div>
<p><img src="start/images/search-by-sample.png" width="600"/></p>
<h3 id="snv-plot">SNV plot</h3>
<p>When a user clicks on a row to select a recombinant of interest the following visualization, shown below, will be rendered.</p>
<p><img src="start/images/XBG-snv-plot.png" width="1000"/></p>
<p>The above visualization shows all of the single-nucleotide variant (SNV) sites in the recombinant sequence and its two parents (donor/acceptor), with respect to the reference sequence. The recombinant-informative sites are highlighted in <span style="color:orange">orange</span> where the recombinant matches the donor, and <span style="color:DodgerBlue">blue</span> where the recombinant matches the acceptor.  The gene region annotations are shown below the trio sequences in the bottom track.</p>
<h3 id="query-descendants">Query Descendants</h3>
<p>For a selected recombinant ancestor node of interest, you might want to query which samples are descendants of this inferred recombinant. Simply <strong>click</strong> the <code>Recombinant</code> label to the left of the track to view up to 10,000 sample descendants of that particular recombinant, as seen in the screenshots below.</p>
<p>You can also click the <code>Donor</code> and <code>Acceptor</code> labels to query the samples that are descendants of those particular parental nodes.</p>
<p><img src="start/images/query-desc.png" width="1000" height="500"/></p>
<p><br></p>
<p>The side panel will display the 10,000 sample descendants by default, and you can <strong>click</strong> the <code>Download Descendants</code> button to download a <code>.txt</code> file containing all sample descendants for the selected trio node. (one per line)</p>
<p><img src="start/images/query-desc-select.png" width="1000" height="500"/></p>
<p><br></p>
<h3 id="taxonium-view">Taxonium View</h3>
<p>View trio sequences (recombinant/donor/acceptor) in Taxonium/Treenome Global Phylogeny.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Taxonium view feature is currently only available for public tree results.</p>
</div>
<p><br></p>
<p><img src="start/images/select-taxonium.png" width="1000" height="500"/></p>
<p><br></p>
<p>The <code>Recombinant/Donor/Acceptor</code> nodes are circled in the global tree. Click the magnify button shown in the image below to zoom into the particular node of interest.</p>
<p><img src="start/images/view-taxonium.png" width="1000" height="500"/>
<br></p>
<h3 id="view-usher-subtree">View UShER Subtree</h3>
<p>This feature will take you to the <a href="https://genome.ucsc.edu/cgi-bin/hgPhyloPlace">UCSC UShER</a> tool, where you can view the tree using <a href="https://github.com/yatisht/usher">UShER</a>. This feature will automatically sample 10 descendants from the recombinant node in order to view the subtree.</p>
<p><img src="start/images/select-usher.png" width="1000" height="500"/></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature will open a new tab to <code>UShER</code> and may take a few minutes to load in the new tab.</p>
</div>
<p>Once finished loading, you will see the following page, where you can view the subtree by clicking <code>view downsampled global tree in Nextstrain</code>.<br></p>
<p><img src="start/images/view-usher-subtree.png" width="1000" height="500"/></p>
<p><br></p>
<p><img src="start/images/view-nextstrain.png" width="1000" height="500"/></p>
<p><br></p>
<h3 id="recombinant-detailed-overview">Recombinant Detailed Overview</h3>
<p>To view more even more detailed information about a particular recombinant of interest click the <code>More Info</code> button in the <code>Overview</code> section.</p>
<p><img src="start/images/select-info.png" width="1000" height="500"/>
<br></p>
<p><strong>This will display the following information:</strong></p>
<ul>
<li>Current Recombinant Lineage</li>
<li>Recombinant Origin Date (as inferred by <a href="https://doi.org/10.1101/2021.10.27.465994">Chronumental</a>)</li>
<li>Recombinant parental lineages</li>
<li>Number of sequences descendant from this recombinant</li>
<li>Earliest descendant sequence</li>
<li>Most recent descendant sequence</li>
<li>Countries where descendant sequences have been detected</li>
<li>Quality Control Checks not passing (otherwise <span style="color:green">PASS</span> if all QC checks pass)</li>
</ul>
<p><img src="start/images/view-info.png" width="600" height="500"/></p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>If there is additional information you would like to know for a particular recombinant of interest, please make this suggestion through a <a href="https://github.com/TurakhiaLab/rivet/issues">GitHub Issue</a> in our repository.</p>
</div>
<p><br></p>
<h3 id="view-amino-acid-sites">View Amino Acid Sites</h3>
<p>This option shows the amino acid mutations matched with their corresponding nucleotide mutation positions. This feature uses <code>matUtils summary --translate</code>, which is built automatically into the <code>RIVET</code> backend pipeline. In short, <code>matUtils</code> provides a method to compute the correct amino acid translations at each node in the tree, which <code>RIVET</code> uses to obtain the amino acid mutations for a given recombinant ancestor node.</p>
<p>For more information on this method, please see the following <a href="https://usher-wiki.readthedocs.io/en/latest/tutorials.html#example-amino-acid-translation-workflow">matUtils documentation</a>.</p>
<p><img src="start/images/select-aa.png" width="1000" height="500"/></p>
<p><br>
All coding amino acid translations are annotated above each corresponding SNV position (if any).</p>
<p><img src="start/images/view-aa.png" width="1000" height="500"/></p>
<p><br></p>
<hr>

<h2 id="rivet-results-table">RIVET Results Table</h2>
<p>Each of the sections below describes the columns of RIVET's results table of inferred recombinant ancestors.</p>
<p><strong>Recombinant Node ID</strong><br></p>
<ul>
<li>UShER assigned node id for inferred recombinant node</li>
</ul>
<p><strong>Donor Node ID</strong> <br></p>
<ul>
<li>UShER assigned node id for donor (recombinant parentental node)</li>
</ul>
<p><strong>Acceptor Node ID</strong><br></p>
<ul>
<li>UShER assigned node id for acceptor (recombinant parentental node)</li>
</ul>
<p><strong>Breakpoint 1 Interval</strong> <br></p>
<ul>
<li>RIPPLES inferred breakpoint interval 1</li>
</ul>
<p><strong>Breakpoint 2 Interval</strong><br></p>
<ul>
<li>RIPPLES inferred breakpoint interval 2</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information on the <code>RIPPLES</code> algorithm, please see: <a href="https://www.nature.com/articles/s41586-022-05189-9">Pandemic-scale phylogenomics reveals the SARS-CoV-2 recombination landscape</a></p>
</div>
<p><strong>Recombinant Clade</strong><br></p>
<ul>
<li>Recombinant clade classification as assigned by <code>Nextstrain</code></li>
</ul>
<p><strong>Recombinant Lineage</strong><br></p>
<ul>
<li>Recombinant lineage designation as assigned by <code>Pangolin</code></li>
</ul>
<p><strong>Donor Clade</strong><br></p>
<ul>
<li>Donor clade classification as assigned by <code>Nextstrain</code></li>
</ul>
<p><strong>Donor Lineage</strong><br></p>
<ul>
<li>Donor lineage designation as assigned by <code>Pangolin</code></li>
</ul>
<p><strong>Acceptor Clade</strong><br></p>
<ul>
<li>Acceptor clade classification as assigned by <code>Nextstrain</code></li>
</ul>
<p><strong>Acceptor Lineage</strong><br></p>
<ul>
<li>Acceptor lineage designation as assigned by <code>Pangolin</code></li>
</ul>
<p><strong>Chronumental-inferred origin date</strong><br></p>
<ul>
<li>Inferred first emergence of recombinant ancestor sequence using the <a href="https://github.com/theosanderson/chronumental">Chronumental</a> method, which runs automatically as part of the <code>RIVET</code> pipeline. In short, <code>Chronumental</code> is a accurate and scalable time-tree estimation method that uses stochastic gradient descent to estimate lengths of time for tree branches under a probabilistic model. For more information on this method, please see the <a href="https://doi.org/10.1101/2021.10.27.465994">Chronumental</a> paper.</li>
</ul>
<p><strong>Recombinant Ranking Score</strong><br></p>
<ul>
<li>The ranking score represents a <strong>growth score</strong> that we compute for each inferred recombinant, which is designed to help prioritize recently emerging recombinants and recombinants with many descendant circulating sequences.</li>
<li>
<p>By default, we order the main <code>RIVET</code> results table by maximum ranking score, which attempts to prioritize highest concern recombinants of interest at the top of the list.<br></p>
<p>The recombinant <strong>growth metric</strong> below, <em>G(R)</em>, for a recombinant node with a set of descendants <em>S</em> is defined below:</p>
</li>
</ul>
<div class="arithmatex">\[ \ G(R) = 2^{-m(R)} * \sum_{s\in S} 2^{-m(s)} \]</div>
<ul>
<li>In the equation above, and correspond to the number of months (30-day intervals) <em>ùëö(ùëÖ)</em> <em>ùëö(ùë†)</em>
elapsed since the recombinant node was inferred to have originated and its descendant <em>ùëÖ</em>
sequence was sampled, respectively. The growth score above, <em>G(R)</em>, is computed for each
detected recombinant <em>R</em>, and the final recombinant list is ranked based on descending growth
scores.</li>
</ul>
<p><strong>Representative Descendant</strong><br></p>
<ul>
<li>This selected sample is a descendant with the fewest additional mutations as compared to it's recombinant ancestor.</li>
</ul>
<p><strong>Informative Site Sequence</strong><br></p>
<ul>
<li>The informative site sequence is a binary string of <code>A</code> and <code>B</code> for each trio sequence, where an <code>A</code> is assigned if the recombinant node allele at the site matches only the donor node allele at that site, or a <code>B</code> if the recombinant matched only the acceptor.</li>
</ul>
<p><strong>3SEQ (M, N, K)</strong><br></p>
<ul>
<li>3SEQ M, M, K values used to check individual p-values in a pre-generated 3SEQ p-value table.</li>
</ul>
<p><strong>3SEQ P-Value</strong><br></p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information on the <code>3SEQ</code> method and its use in <code>RIPPLES</code>, please see <a href="https://academic.oup.com/mbe/article/35/1/247/4318635">Improved Algorithmic Complexity for the 3SEQ Recombination Detection Algorithm</a> and the Supplementary Section of <a href="https://www.nature.com/articles/s41586-022-05189-9#MOESM1">Pandemic-scale phylogenomics reveals the SARS-CoV-2 recombination landscape</a></p>
</div>
<p><strong>Original Parsimony Score</strong><br></p>
<ul>
<li>The original parsimony placement score on the global phylogeny.</li>
</ul>
<p><strong>Parsimony Score Improvement</strong><br></p>
<ul>
<li>Highest parsimony score improvement relative to original parsimony score.</li>
</ul>
<p><strong>Quality Control (QC) Flags</strong><br></p>
<ul>
<li>This column represents quality control (QC) or filtration checks that where flagged, meaning that this inferred recombinant is not high-confidence and could represent a false-positive recombinant resulting from bioinformatic, contamination or other sequencing errors. </li>
</ul>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For detailed description of each quality control and filtration check performed in <code>RIVET's</code> backend pipeline, see the <a href="start/filtration.html">Quality Control and Filtration Checks</a> page.</p>
</div>
<p><strong>Common sources of <span style="color:red">false positive</span> errors in <code>RIVET‚Äôs</code> pipeline include, but are not limited to:</strong></p>
<ul>
<li>Contamination, sequencing, or assembly errors in the recombinant or parent sequences</li>
<li>Missing sequences resulting in artificially long branches in the UCSC public tree</li>
<li>Misalignments or phylogenetic inconsistencies</li>
</ul>
<p><strong>Common sources of <span style="color:red">false negative</span> errors in <code>RIVET‚Äôs</code> pipeline include, but are not limited to:</strong></p>
<ul>
<li>Too few recombination-informative sites in the recombinant</li>
<li>More than two breakpoints are required to explain the recombinant</li>
<li>Too few descendants of the recombinant or its parent in the UCSC public tree</li>
</ul>
<p><strong>"Click to View" Taxonium</strong><br></p>
<ul>
<li>When clicked, this button will open a separate tab launching the <a href="https://taxonium.org/">Taxonium</a> browser in order to view the particular recombinant trio (recombinant/donor/acceptor) in the context of the global phylogeny.
In short, <a href="https://elifesciences.org/articles/82392">Taxonium</a> is a visualization tool for exploring large trees.</li>
</ul>
<p><br></p>
<hr>

<h2 id="quality-control-and-filtration-checks">Quality Control and Filtration Checks</h2>
<p><br></p>
<p><strong>3SeqP02</strong><br></p>
<ul>
<li>P-value from 3-seq &gt; 0.2.</li>
</ul>
<p><strong>russPval005</strong><br></p>
<ul>
<li>False-discovery rate (FDR) of the parsimony improvement &gt; 0.05. (See <a href="https://www.nature.com/articles/s41586-022-05189-9#MOESM1">Supplementary Text S3 of RIPPLES</a> for details of the null model.)</li>
</ul>
<p><strong>Alt</strong><br></p>
<ul>
<li>"Alternate": Other recombination trios with the same recombination node have more parsimony improvement, fewer possible breakpoint intervals, or better P-values.</li>
</ul>
<p><strong>cluster</strong><br></p>
<ul>
<li>All recombination informative mutations occur within a span of 20 nucleotides.</li>
</ul>
<p><strong>redundant</strong><br></p>
<ul>
<li>More than two of the recombination node, donor node, and acceptor node appear in that of another trios.</li>
</ul>
<p><strong>Informative_sites_clump</strong><br></p>
<ul>
<li>More than 5 recombination-informative mutations in a 20-nucleotide span.</li>
</ul>
<p><strong>Suspicious_mutation_clump</strong><br></p>
<ul>
<li>More than 6 mutations (or 3 near indels) in a 20-nucleotide span on any of the donor node, the aceptor node or the recombination node.</li>
</ul>
<p><strong>Too_many_mutations_near_INDELs</strong><br></p>
<ul>
<li>Too many mutations on 100-nt spans near indels or a string of Ns.</li>
</ul>
<p><br></p>
<hr>

<h2 id="using-rivet-for-other-pathogens">Using RIVET for Other Pathogens</h2>
<p><br></p>
<p>Below are two examples of using <code>RIVET's</code> backend pipeline to infer and visualize recombinants of other pathogens beyond SARS-CoV-2.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently, <code>RIVET's</code> backend QC/filtration pipeline is specific to SARS-CoV-2 and will not run when using the <code>RIVET</code> backend for other pathogens.</p>
</div>
<h3 id="human-respiratory-syncytial-virus-hrsv-subgroup-a">Human Respiratory Syncytial Virus (HRSV) Subgroup A</h3>
<p>Below is the SNV visualization resulting from inferring a putative recombinant in an <code>RSV</code> mutation-annotated tree (MAT).</p>
<p><img src="start/images/rsv-snv.png" height=600 width=1000/></p>
<p>Since the SNV plot for RSV includes many sites, only the region up to around position 1000 is shown in the image above.<br />
<strong>Please click the download button below to view the entire <code>RSV</code> SNV plot as an SVG image.</strong></p>
<div>
<a href="start/images/rsv-snv.svg" download>
  <button class="btn" type="button">Download Full RSV SNV Plot</button>
</a>
</div>

<style>
/* Style for download button */
.btn {
  background-color: DodgerBlue;
  border: none;
  color: white;
  padding: 12px 30px;
  cursor: pointer;
  font-size: 20px;
}

.btn:hover {
  background-color: RoyalBlue;
}
</style>

<hr>

<h3 id="monkeypox-virus">Monkeypox Virus</h3>
<p>Edit the following fields in the <code>config.yaml</code> file:</p>
<p>Change the GenBank file from the default SARS-CoV-2 file to the corresponding GenBank file for your pathogen of interest, Monkeypox virus in this case.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Pathogen Ref Seq GenBank file</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">ref_seq</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">monkeypox.gb</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure the <code>environment</code> field is set to <code>local</code>.</p>
</div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000</span>
</code></pre></div>
If desired, you can change the local <code>port</code> at which <code>RIVET</code> will host the local HTTP server in your browser.</p>
<p><br></p>
<p>Now run the following command and RIVET will automatically open your browser to launch the frontend results table and SNV visualization.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>python3 rivet-frontend.py -r recombination_mpxv.2023-07-01.tsv -v mpxv.2023-07-01.vcf -c config.yaml
</code></pre></div></p>
<p>Below is the SNV plot we get for one of the monkeypox virus inferred recombinants.</p>
<p><img src="start/images/monkeypox-snv.png" height=600 width=1000/></p>
<p><br></p>
<div class="admonition check">
<p class="admonition-title">Check</p>
<p>For pathogens with larger genomes than SARS-CoV-2, you may want to change the step interval of genomic coordinate tick marks.  This can be done by changing the <code>tick_step</code> field in <code>RIVET</code> frontend <code>config.yaml</code> file.</p>
</div>
<p><br></p>
<hr>

<h2 id="use-rivet-locally">Use RIVET Locally</h2>
<h3 id="installing-rivet-backend-using-docker-on-linux">Installing RIVET Backend using Docker on Linux</h3>
<div class="admonition install">
<p class="admonition-title">Install</p>
<p>Install <code>Docker</code> on your machine first.</p>
</div>
<p>For ease of use, the entire <code>RIVET</code> backend pipeline, including recombinant ranking, is contained within a pre-built public docker image.</p>
<h3 id="running-rivet-backend-locally-on-your-machine">Running RIVET Backend Locally On Your Machine</h3>
<p>A <code>RIVET</code> backend job can be run locally on your machine.
To launch a Docker shell, run the following two commands.
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>docker run -it mrkylesmith/ripples_pipeline:latest
</code></pre></div>
This will run an interactive <code>Docker</code> shell with the necessary <code>RIVET</code> environment.</p>
<p><br></p>
<p>Type the following help command to ensure your <code>RIVET</code> backend environment is configured correctly.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>python3 rivet-backend.py --help
</code></pre></div>
<p>The <code>wget</code> command-line utility for downloading files from the internet (the necessary <code>MAT</code>, metadata and sequence files required as input to <code>RIVET</code>) is included in the <code>Docker</code> environment. Proceed to the next steps for running a <code>RIVET</code> backend job: <a href="installation/upload.html">Inferring Recombinants Using the RIVET Backend</a>.</p>
<hr>
<p><br></p>
<h3 id="running-rivet-backend-on-google-cloud">Running RIVET Backend On Google Cloud</h3>
<p>We also provide the build-in option of running a parallelized <code>RIVET</code> job across a user specified number of Google Cloud Platform (GCP) machines.</p>
<div class="admonition setup">
<p class="admonition-title">Setup</p>
<p>If you would like to use GCP, please see the following docs for setting up an account with Google Cloud Platform: <a href="gcp_setup.html">GCP Setup Docs</a></p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Put your GCP service account key file (obtained following the docs linked above) in the corresponding location as the command below or update the location in the command below:</p>
</div>
<p>To launch a Docker shell using GCP, run the following two commands providing your GCP Authentication keys file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>KEY=~/.config/gcloud/&lt;key_file.json&gt;
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>docker run -it -e GOOGLE_APPLICATION_CREDENTIALS=/tmp/keys/&lt;key_file.json&gt; -v ${KEY}:/tmp/keys/&lt;key_file.json&gt;:ro mrkylesmith/ripples_pipeline:latest
</code></pre></div>
<hr>
<p><br></p>
<h3 id="install-rivet-frontend-locally-on-your-machine">Install RIVET Frontend Locally On Your Machine</h3>
<h3 id="clone-rivet-repo-locally">Clone RIVET Repo Locally</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>git clone https://github.com/TurakhiaLab/rivet.git
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>cd rivet
</code></pre></div>
<h3 id="conda-install">Conda Install</h3>
<div class="admonition install">
<p class="admonition-title">Install</p>
<p>Install <code>Conda</code> on your machine first.</p>
</div>
<p>All the <code>RIVET</code> frontend dependencies have been added to Conda environment setup, that can be found in the <code>install</code> directory.</p>
<p><br></p>
<p>Run the following commands to activate the <code>rivet</code> Conda environment.
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>conda env create -f install/rivet_env.yml
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>conda activate rivet
</code></pre></div>
<br></p>
<p>Type the following command to ensure your <code>RIVET</code> frontend environment is configured correctly, and then proceed to the next steps for using the <code>RIVET</code> frontend: <a href="installation/analyze.html">Visualizing Your Results Using the RIVET Frontend</a></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>python3 rivet-frontend.py --help
</code></pre></div>
<p><br></p>
<hr>

<h2 id="inferring-recombinants-using-the-rivet-backend">Inferring Recombinants Using the RIVET Backend</h2>
<p>Infer recombinant ancestry in your own SARS-CoV-2 sequences using <code>RIVET's</code> backend.</p>
<div class="admonition installation">
<p class="admonition-title">Installation</p>
<p>Make sure <code>RIVET</code> is installed on your local machine before proceeding.</p>
</div>
<hr>

<h3 id="rivet-backend"><a name="rivet_backend"></a>RIVET Backend</h3>
<p>The <code>RIVET</code> backend uses <a href="https://www.nature.com/articles/s41586-022-05189-9">RIPPLES</a> for SARS-CoV-2 recombination detection. For more information on the <code>RIPPLES</code> algorithm please see: <a href="https://doi.org/10.1038/s41586-022-05189-9">Pandemic-Scale Phylogenomics Reveals The SARS-CoV-2 Recombination Landscape</a></p>
<p><img src="installation/images/rivet-backend.png" width="1000" height="500"/></p>
<h3 id="rivet-backend-architecture">RIVET Backend Architecture</h3>
<p>A. <strong>RIPPLES Job Orchestrator</strong>
When running a <code>RIVET</code> job on Google Cloud Platform (GCP), <code>RIVET</code> calculates the number of long branches in the input mutation-annotated tree and partitions them across <code>n</code> GCP instances, which is a parameter specified by the user.  This stage of the pipeline is responsible for setting up and launching these parallel jobs, as well as monitoring their progress as they run. This stage of the pipeline also initiates a <a href="https://github.com/theosanderson/chronumental">Chronumental</a> job, to run concurrently as a subprocess on the local machine, which is explained in the following part B.</p>
<p>B. <strong>Infer MAT nodes ancestral dates</strong>
In order to infer the emergence of detected ancestral recombinant nodes of interest for ranking and epidemiological prioritization, <code>RIVET</code> builds a time-tree using the <a href="https://www.biorxiv.org/content/10.1101/2021.10.27.465994v1">Chronumental</a> method. This method uses the sample dates provided in the sequence metadata file to build a probabilistic
model for length of time across branches in the tree and is able to infer the dates of all internal nodes in the tree. <code>RIVET</code> uses these dates for internal nodes that we label as recombinants.</p>
<p>C. <strong>Mult-node GCP Workflow</strong>
When running a <code>RIVET</code> job on GCP, the <code>RIPPLES</code> recombinant search and subsequent filtration pipeline utilizes multi-node parallelism. The degree of speedup depends on how many GCP instances the user decides to allocate towards the job, since the <code>MAT</code> long branches to search will be automatically partitioned across the given <code>n</code> machines. On each instance, once a putative list of recombinant nodes is obtained, the pipeline on that machine begins quality control and filtration checks to flag false-positive recombinants. </p>
<p>D. <strong>Post-filtration Aggegrator and Ranking</strong>
This is the last stage of the pipeline and it occurs on your local machine, for both on-premise and GCP <code>RIVET</code> workflows. Once the recombination search and filtration steps of the pipeline have concluded on <strong>all</strong> instances and the local <code>Chronumental</code> job has finished, the filtered recombinant results for each partition of long branches are aggregated locally and the post-filtration stage of the pipeline can begin. During this last step, the final list of recombinants is ranked according to a <a href="start/table.html#recombinant-ranking-score">growth metric</a> and also additional information on each recombinant is gathered, such as clade/lineage information, descendant samples, parsimony scores, quality control/filtration information, and more.  For a full list of all information reported about each putative recombinant, please see our documentation about the <a href="start/table.html">RIVET Results Table</a></p>
<h3 id="rivet-backend-input">RIVET Backend Input</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>All input files should be placed in the current directory where you will launch your <code>RIVET</code> workflow.</p>
<p><strong>If using GCP:</strong> The following input files with the same naming as you specify in the <code>config.yaml</code> file below need to be placed in your GCP Storage Bucket (<code>bucket_id</code>) before launching the remote <code>RIVET</code> job.</p>
</div>
<ol>
<li>
<p><code>UShER Mutation-Annotated Tree (MAT)</code>: Updated daily and can be obtained here: <a href="https://hgdownload.soe.ucsc.edu/goldenPath/wuhCor1/UShER_SARS-CoV-2/">SARS-CoV-2 global MAT</a></p>
<ul>
<li><code>RIVET</code> performs recombination search using <code>RIPPLES</code> over an UShER mutation-annotated tree (<code>MAT</code>).  Any samples you wish to search for recombinant ancestry must first be added to the <code>MAT</code> using <a href="https://github.com/yatisht/usher/tree/master">UShER</a>. 
<br></li>
</ul>
</li>
<li>
<p><code>Sequence Metadata</code>: Also updated daily to match the sequences in the corresponding MAT and can be obtained here: <a href="https://hgdownload.soe.ucsc.edu/goldenPath/wuhCor1/UShER_SARS-CoV-2/">metadata</a></p>
<ul>
<li>The sequence metadata is a <code>TSV</code> file containing information about each sample in the <code>MAT</code>, including its name, date sequenced, country sequenced, and clade/lineage information. This information is used throughout the <code>RIVET</code> backend pipeline, for inferring the recombinant ancestor emergence date for example.
<br></li>
</ul>
</li>
<li><code>Sequence Files (FASTA):</code> Downloadable at the following links, for a given <code>$TREE_DATE</code> (eg. 2022-07-04)<ul>
<li><code>https://hgwdev.gi.ucsc.edu/~angie/sarscov2phylo/ncbi.$TREE_DATE/genbank.fa.xz</code></li>
<li><code>https://hgwdev.gi.ucsc.edu/~angie/sarscov2phylo/cogUk.$TREE_DATE/cog_all.fasta.xz</code>
<br></li>
</ul>
</li>
</ol>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>During the <code>RIVET</code> backend quality control and filtration pipeline these sample sequence files are aligned to the SARS-CoV-2 reference and the <code>RIPPLES</code> inferred recombinantion-informative sites are inspected for bioinformatic and sequencing error quality issues to flag false-positive recombinants. </p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>To download the SARS-CoV-2 <code>Genbank</code> sequences for <code>2022-07-04</code>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>wget https://hgwdev.gi.ucsc.edu/~angie/sarscov2phylo/ncbi.2022-07-04/genbank.fa.xz
</code></pre></div></p>
</div>
<h3 id="launch-rivet-job">Launch RIVET Job</h3>
<p>The <code>RIVET</code> backend is setup to be run <strong>locally on your own machine</strong> or on <strong>Google Cloud Platform (GCP)</strong>, and for ease-of-use is entirely configured through the use of the <code>config.yaml</code> file.</p>
<div class="admonition setup">
<p class="admonition-title">Setup</p>
<p>If you would like to run your RIVET backend job on Google Cloud Platform, please see the following documentation for setting up an account: <a href="gcp_setup.html">GCP Setup Docs</a></p>
</div>
<p>Copy the config file from <code>template/config.yaml</code> into the current directory and fill out the fields.  More information on each field can be found below.
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>cp template/config.yaml .
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1"># GCP Credentials [LEAVE EMPTY FOR LOCAL JOB]</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="nt">bucket_id</span><span class="p">:</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="nt">project_id</span><span class="p">:</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="nt">key_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/keys/</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="c1"># GCP Machine and Storage Bucket Config [LEAVE EMPTY FOR LOCAL JOB]</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="nt">instances</span><span class="p">:</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="nt">boot_disk_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="nt">machine_type</span><span class="p">:</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="c1"># Ripples Parameters Config [REQUIRED]</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ripples-fast</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="nt">mat</span><span class="p">:</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="nt">newick</span><span class="p">:</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="nt">date</span><span class="p">:</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="c1"># Local results output directory, or name of folder on GCP storage bucket</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="nt">results</span><span class="p">:</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="nt">reference</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">reference.fa</span>
<a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a>
<a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="c1"># Additional Parameters</span>
<a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a><span class="nt">num_descendants</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="nt">public_tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="nt">verbose</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="c1"># Default to all available threads if left empty</span>
<a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="nt">threads</span><span class="p">:</span>
<a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="nt">docker_image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mrkylesmith/ripples_pipeline:latest</span>
<a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a><span class="nt">generate_taxonium</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
</code></pre></div>
<p>Fill out the configuration file with the settings for your <code>RIVET</code> job.  If the field is already filled in, you will likely not want to change that parameter value.</p>
<div class="admonition info configuration file">
<p class="admonition-title">Info</p>
<p>For more information on each field in the <code>config.yaml</code> file please see the following page: <a href="installation/config.html">RIVET Backend Configuration</a></p>
</div>
<h3 id="rivet-backend-outputs">RIVET Backend Outputs</h3>
<p>The pipeline will create a local results directory, based on the name given for the <code>results</code> field in <code>config.yaml</code></p>
<p>The pipeline will automatically output the following four files within your local <code>results</code> directory (and in <code>GCP</code> bucket if running remote job):</p>
<ol>
<li><code>final_recombinants_&lt;DATE&gt;.txt</code>: a <code>TSV</code> file containing the detected recombinants, with the recombinant node id, donor node id and acceptor node id as the first three columns in the file. The rest of the columns contain information about each detected recombinant, including clade/lineage assignments, 3SEQ M,N,K and p-values, a representative descendant (containing the fewest additional mutations with respect to the recombinant node), recombinant ranking scores, and other information to be displayed by the RIVET frontend. For more information on this file, please see the <a href="start/table.html">RIVET Results Table</a> page.</li>
</ol>
<p><br></p>
<ol>
<li><code>trios.vcf</code>: VCF file containing the SNVs of each trio (recombinant and its parents) node.</li>
</ol>
<p><br></p>
<ol>
<li><code>sample_descedants.txt.xz</code>: a <code>TSV</code> file where each row contains a mapping from each trio node id (one node id per row), to a set of descendant samples corresponding to that internal node id.</li>
</ol>
<p><br></p>
<ol>
<li><code>&lt;DATE&gt;.taxonium.jsonl.gz</code>: a jsonl file used by RIVET frontend to display the recombinant node trios within the context of the global phylogeny, powered by Taxonium and Treenome.</li>
</ol>
<p><br></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently the <code>Taxonium</code> view is only provided using public trees provided at: <a href="https://hgdownload.soe.ucsc.edu/goldenPath/wuhCor1/UShER_SARS-CoV-2/">https://hgdownload.soe.ucsc.edu/goldenPath/wuhCor1/UShER_SARS-CoV-2/</a></p>
</div>
<p><br></p>
<hr>

<h2 id="visualizing-your-results-using-the-rivet-frontend">Visualizing Your Results Using the RIVET Frontend</h2>
<p><br></p>
<div class="admonition install">
<p class="admonition-title">Install</p>
<p>Make sure you have installed the <code>RIVET</code> frontend on your machine before proceeding.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using the <code>RIVET</code> frontend to visualize recombinants for pathogens other than SARS-CoV-2, please see the <strong>Using RIVET for Other Pathogens</strong> page.</p>
</div>
<h3 id="configuration">Configuration</h3>
<p><code>RIVET's</code> frontend settings can be configured using the provided YAML file, <code>config.yaml</code>. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Configuration file for RIVET</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1">### Color Schema Options ####</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="c1"># Base coloring</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#cc0000&#39;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="nt">g</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#cc7722&#39;</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#57026f&#39;</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="nt">t</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#338333&#39;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="nt">base_matching_reference</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#dadada&#39;</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="nt">reference_track</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#333333&#39;</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="c1"># Recombinant-Informative Coloring for polygons/position column labels</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="nt">recomb_match_acceptor</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#2879C0&#39;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="nt">recomb_match_donor</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#F9521E&#39;</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="nt">non_informative_site</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#dadada&#39;</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="c1"># Breakpoint Intervals</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="nt">breakpoint_intervals</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#800000&#39;</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="c1"># Genomic Coordinate Track (default all genomic regions are same color)</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="nt">genomic_regions</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;#33333&#39;</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="c1"># Step for tick-marks on genomic coordinate track</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="nt">tick_step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a><span class="c1"># Pathogen</span>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="nt">ref_seq</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NC_045512.gb</span>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a><span class="c1">### Taxonium Tree View Options ###</span>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a><span class="nt">date</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2023-01-31</span>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a><span class="nt">bucket_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public_trees</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a><span class="c1"># Keep environment as &quot;local&quot;</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a><span class="c1"># If running locally, port to use</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When running <code>RIVET</code> locally, don't change the <code>environment</code> field.  Also, it won't be necessary to change the <code>date</code> field or <code>bucket_name</code> field.</p>
</div>
<p>Run the following command to launch the <code>RIVET</code> frontend in your local browser.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Try the following example using example SARS-CoV-2 recombinants provided in the <code>example/</code> directory.</p>
</div>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="n">python3</span> <span class="n">rivet</span><span class="o">-</span><span class="n">frontend</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">r</span> <span class="n">example</span><span class="o">/</span><span class="n">final_recombinants_example</span><span class="o">.</span><span class="n">txt</span> <span class="o">-</span><span class="n">v</span> <span class="n">example</span><span class="o">/</span><span class="n">trios_example</span><span class="o">.</span><span class="n">vcf</span> <span class="o">-</span><span class="n">c</span> <span class="n">config</span><span class="o">.</span><span class="n">yaml</span>
</code></pre></div>
<br></p>
<h3 id="required-inputs">Required Inputs</h3>
<p><code>-f, RECOMBINANT_RESULTS</code>: Input text file containing inferred recombinant nodes.  First three columns in this text file must contain (1) recombinant node ID\t (2) donor node ID\t (3) acceptor node ID.  Note, donor and acceptor denote the two parental nodes of the inferred recombinant.</p>
<p><strong>Expected format:</strong></p>
<table>
<thead>
<tr>
<th>Recombinant Node ID</th>
<th>Donor Node ID</th>
<th>Acceptor Node ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>node_1156861</td>
<td>node_1155169</td>
<td>node_1167556</td>
</tr>
<tr>
<td>node_1067629</td>
<td>node_1021823</td>
<td>node_1156861</td>
</tr>
</tbody>
</table>
<p>Additional columns can be provided optionally and will be included in the rendered results table, but are <strong>not required</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>RIVET</code> backend will automatically generate the necessary input files above.  Follow the steps listed on the <a href="installation/upload.html">Inferring Recombinants Using the RIVET Backend</a> page.  However, the <code>RIVET</code> frontend can also be used independently of the backend, just ensure that the input files adhere to the expected formatting.</p>
</div>
<p><br></p>
<p><code>-v, VCF</code>: An input VCF containing single-nucleotide variants (SNVs) of all recombinant/donor/acceptor trio nodes present in the input <code>RECOMBINANT_RESULTS</code> file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>RIVET only supports viewing single-nucleotide variants (SNVs), and not indels or SVs. Please see the following workflow to <a href="create_vcf.html">create a VCF</a> for uploading to RIVET locally.</p>
</div>
<p><br></p>
<p><code>-c, CONFIG</code>: The <code>config.yaml</code> file, shown at the top of this page, and provided in the repository.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/TurakhiaLab/rivet" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.expand", "navigation.tabs.sticky", "navigation.instant.prefetch", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>